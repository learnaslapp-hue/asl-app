import{a as H,b as Y}from"./chunk-EONRAGQT.js";import{c as $}from"./chunk-5NPJNAPJ.js";import"./chunk-FUHXKBJ3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-64PZ3OSN.js";import"./chunk-JHV7MXM5.js";import"./chunk-7ISF44PN.js";import"./chunk-DHGKAU6G.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-WKYNZQQQ.js";import"./chunk-GGIMTWXW.js";import"./chunk-YPOD3FIG.js";import"./chunk-KFC3XH7K.js";import"./chunk-A4LS7W3H.js";import"./chunk-CKP3SGE2.js";import{a as F,b as E}from"./chunk-3NTGT44D.js";import{a as q,b as u,d as m}from"./chunk-3T6SOJS6.js";import{Ab as V,Ea as I,F as n,Ga as x,H as w,Ha as B,Ja as U,Ka as R,La as c,Na as L,Oa as M,Pa as j,S as b,T as P,Tb as k,U as A,Ub as G,Vb as D,Wb as W,eb as O,r as p,s as y,wb as T,xb as z}from"./chunk-UJODM2NG.js";import"./chunk-MTUXJE3Z.js";import"./chunk-RD3XSXCJ.js";import"./chunk-6NUEBUYE.js";import"./chunk-W5FUFK6T.js";import"./chunk-PLFY2CTQ.js";import"./chunk-7PW2J7O2.js";import"./chunk-QIBKRVRZ.js";import"./chunk-WWLKLYXQ.js";import"./chunk-ADUYDX2F.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as o}from"./chunk-LRBG2F7K.js";var d=E("App",{web:()=>import("./chunk-6ZB7IN6N.js").then(t=>new t.AppWeb)});var J=(()=>{let r=class r{constructor(e,s,l,Q,X,Z,_,tt,et){this.platform=e,this.storageService=s,this.statusBarService=l,this.router=Q,this.activatedRoute=X,this.modalCtrl=Z,this.loadingCtrl=_,this.authService=tt,this.actionSheetController=et,this.backSub=this.platform.backButton.subscribeWithPriority(10,()=>o(this,null,function*(){let g=yield this.modalCtrl.getTop(),f=yield this.actionSheetController.getTop(),v=yield this.loadingCtrl.getTop();if(g){yield g.dismiss();return}if(f){yield f.dismiss();return}if(v){yield v.dismiss();return}console.log("Current route:",this.router.url);let i=this.router.url,S=[],ot=[{text:"Minimize the app?",handler:()=>o(this,null,function*(){return d.minimizeApp()})},{text:"Close the app?",handler:()=>o(this,null,function*(){return d.exitApp()})},{text:"Back",cssClass:"close dismiss cancel",handler:()=>o(this,null,function*(){this.actionSheetController.dismiss()})}];if(i.includes("/login")||i.includes("/register")){this.router.navigateByUrl("/landing-page",{replaceUrl:!0});return}else if(i.includes("/profile")||i.includes("/alphabet")){this.router.navigateByUrl("/home",{replaceUrl:!0});return}else if(i.includes("/lessons")){/^\/lessons$/.test(i)?this.router.navigateByUrl("/home",{replaceUrl:!0}):this.router.navigateByUrl("/lessons",{replaceUrl:!0});return}else{if(i.includes("/send-verification")||i.includes("/reset-password")||i.includes("/otp"))return;i.includes("/home")&&S.push({text:"Logout",handler:()=>o(this,null,function*(){let C=yield this.actionSheetController.create({header:"Are you sure you want to logout?",buttons:[{text:"Yes, Logout",handler:()=>o(this,null,function*(){this.authService.logout(),this.router.navigateByUrl("/login",{replaceUrl:!0})})},{text:"Cancel",cssClass:"close dismiss cancel",handler:()=>o(this,null,function*(){C.dismiss()})}]});yield C.present()})})}yield(yield this.actionSheetController.create({buttons:[...S,...ot]})).present()})),this.initializeStatusBar()}ionViewWillEnter(){this.initializeStatusBar()}ionViewWillLeave(){var e;(e=this.backSub)==null||e.unsubscribe(),this.backSub=void 0}initializeStatusBar(){this.statusBarService.show(!0),this.statusBarService.modifyStatusBar(H.Light,"#ffffff"),this.statusBarService.overLay(!1)}ngOnInit(){this.storageService.getSavedProfile().then(e=>{e?(console.log("AppComponent: profile loaded on init",e),e!=null&&e.progress||(e.progress={alphabet:{lastOpened:null,compeleted:[],status:"0%"},lessons:{lastOpened:"",compeleted:[],status:"0%"},quiz:{lastOpened:"",compeleted:[],status:"0%"}}),this.authService.setCurrentLogin(e),this.storageService.saveProfile(e)):console.log("AppComponent: no profile found on init")}),this.platform.ready().then(()=>o(this,null,function*(){F.getPlatform()!=="web"&&this.initializeStatusBar()}))}ngOnDestroy(){var e;(e=this.backSub)==null||e.unsubscribe()}};r.\u0275fac=function(s){return new(s||r)(n(O),n(u),n(Y),n(c),n(U),n(k),n(W),n(m),n(D))},r.\u0275cmp=w({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(s,l){s&1&&(b(0,"ion-app"),A(1,"ion-router-outlet"),P())},dependencies:[V,z],encapsulation:2});let t=r;return t})();function rt(){return o(this,null,function*(){let t=p(u),r=p(m),a=p(c),e=yield t.getSavedProfile();if(!!e&&typeof e.userId=="string"&&e.userId.trim().length>0)return!0;let l=yield t.isOnboardingCompleted();return l!==!0&&l!=="true"&&l!==1?a.parseUrl("/landing-page"):(r.logout(),a.parseUrl("/login"))})}function it(){return o(this,null,function*(){let t=p(u),r=p(c),a=yield t.getSavedProfile();return!!a&&typeof a.userId=="string"&&a.userId.trim().length>0?r.parseUrl("/home"):!0})}var h=()=>rt(),K=()=>it();var N=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",canMatch:[h],loadComponent:()=>import("./chunk-T7KAZKAB.js").then(t=>t.HomePage)},{path:"profile",canMatch:[h],loadComponent:()=>import("./chunk-PTQLIENT.js").then(t=>t.ProfilePage)},{path:"landing-page",loadComponent:()=>import("./chunk-WTL2ZXBE.js").then(t=>t.LandingPagePage)},{path:"login",canMatch:[K],loadComponent:()=>import("./chunk-2AF5FOAA.js").then(t=>t.LoginPage)},{path:"register",loadComponent:()=>import("./chunk-EISBDRUG.js").then(t=>t.RegisterPage)},{path:"otp",loadComponent:()=>import("./chunk-7QRA6HYT.js").then(t=>t.OtpPage)},{path:"send-verification",loadComponent:()=>import("./chunk-F2UIML2F.js").then(t=>t.SendVerificationPage)},{path:"alphabet",loadComponent:()=>import("./chunk-J6UEISPL.js").then(t=>t.AlphabetPage)},{path:"lessons",loadComponent:()=>import("./chunk-ZRUO2QN7.js").then(t=>t.LessonsPage)},{path:"lessons/:category",loadComponent:()=>import("./chunk-VDDTTITY.js").then(t=>t.CategoryPage)},{path:"category",loadComponent:()=>import("./chunk-VDDTTITY.js").then(t=>t.CategoryPage)},{path:"text-to-sign",loadComponent:()=>import("./chunk-EQDY4UTP.js").then(t=>t.TextToSignPage)},{path:"reset-password",loadComponent:()=>import("./chunk-ZA7FMUXH.js").then(t=>t.ResetPasswordPage)},{path:"**",redirectTo:""}];I(J,{providers:[{provide:R,useClass:T},y($.forRoot(),q.forRoot({name:"__myappdb"})),G(),M(N,j(L)),x(B())]});
