import{a as Z,b as ee,h as te,i as ie,r as re}from"./chunk-HZKMSCS6.js";import{a as ne,b as oe}from"./chunk-5NPJNAPJ.js";import"./chunk-FUHXKBJ3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-64PZ3OSN.js";import"./chunk-JHV7MXM5.js";import"./chunk-7ISF44PN.js";import"./chunk-DHGKAU6G.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-WKYNZQQQ.js";import"./chunk-GGIMTWXW.js";import"./chunk-YPOD3FIG.js";import"./chunk-KFC3XH7K.js";import"./chunk-A4LS7W3H.js";import"./chunk-CKP3SGE2.js";import{d as Y}from"./chunk-3T6SOJS6.js";import{Aa as _,Bb as G,Ca as N,Cb as Q,Db as U,E as o,Eb as x,F as a,Fb as z,Gb as H,H as v,Ib as w,La as q,Ma as L,Mb as W,O as m,Qa as B,Rb as $,S as s,Sb as J,T as d,Ta as l,U as h,Ua as M,Va as R,Xa as j,Xb as K,Yb as X,Z as b,Za as A,_a as O,ba as g,bb as F,db as V,ea as S,eb as D,fa as I,ga as C,ja as f,oa as P,pa as k,qa as T,wa as E}from"./chunk-UJODM2NG.js";import"./chunk-MTUXJE3Z.js";import"./chunk-RD3XSXCJ.js";import"./chunk-6NUEBUYE.js";import"./chunk-W5FUFK6T.js";import"./chunk-PLFY2CTQ.js";import"./chunk-7PW2J7O2.js";import"./chunk-QIBKRVRZ.js";import"./chunk-WWLKLYXQ.js";import"./chunk-ADUYDX2F.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as c}from"./chunk-LRBG2F7K.js";var le=p=>({"no-shadow":p}),Ne=(()=>{let u=class u{constructor(t,i,e,n,r,ae,se){this.fb=t,this.authService=i,this.router=e,this.toastCtrl=n,this.loadingCtrl=r,this.platform=ae,this.scrollService=se,this.showPassword=!1,this.form=this.fb.group({name:["",[l.required,l.minLength(2),l.maxLength(50)]],email:["",[l.required,l.email]],password:[null,[l.required,l.minLength(6)]]}),this.backSub=this.platform.backButton.subscribeWithPriority(10,()=>c(this,null,function*(){var y;(y=this.registerSub)==null||y.unsubscribe(),this.router.navigateByUrl("/landing-page",{replaceUrl:!0})})),Z({eye:te,eyeOff:ie,arrowBack:ee})}ionViewWillLeave(){var t;(t=this.backSub)==null||t.unsubscribe(),this.backSub=void 0}ngOnInit(){}ngAfterViewInit(){this.scrollService.register(this.content)}ngOnDestroy(){var t,i;(t=this.registerSub)==null||t.unsubscribe(),(i=this.backSub)==null||i.unsubscribe()}onSubmit(){return c(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),this.showToast("Please fill in valid credentials.");return}let t=yield this.loadingCtrl.create({message:"Signing up...",spinner:"circles"});yield t.present();let{name:i,email:e,password:n}=this.form.value;this.registerSub=this.authService.register({name:i,email:e,password:n}).subscribe(r=>c(this,null,function*(){yield t.dismiss(),console.log("Register response",r),r.success?this.router.navigate(["/otp"],{replaceUrl:!0,state:{name:i,email:e,password:n,type:"verify",backUrl:"register"}}):(r!=null&&r.message.toLowerCase().includes("user already exists")&&this.form.controls.email.setErrors({userExists:!0}),this.showToast((r==null?void 0:r.message)||"Signup failed."))}),r=>c(this,null,function*(){yield t.dismiss(),this.showToast((r==null?void 0:r.message)||"Signup failed.")}))})}showToast(t){return c(this,null,function*(){yield(yield this.toastCtrl.create({message:t,duration:2200,position:"bottom"})).present()})}get name(){return this.form.get("name")}get email(){return this.form.get("email")}get password(){return this.form.get("password")}};u.\u0275fac=function(i){return new(i||u)(a(F),a(Y),a(q),a(oe),a(ne),a(D),a(re))},u.\u0275cmp=v({type:u,selectors:[["app-register"]],viewQuery:function(i,e){if(i&1&&S(w,7),i&2){let n;I(n=C())&&(e.content=n.first)}},decls:26,vars:13,consts:[[3,"ngClass"],[1,"transparent-toolbar"],["slot","start"],["routerLink","/landing-page","fill","clear"],["slot","icon-only","name","arrow-back"],[1,"ion-padding","page",3,"fullscreen"],[1,"wrap"],[1,"card","no-shadow"],[3,"ngSubmit","formGroup"],["formControlName","name","label","Name","labelPlacement","stacked","fill","outline","inputmode","text","placeholder","Name","clearInput","true",1,"mb",3,"errorText"],["formControlName","email","label","Email","labelPlacement","stacked","fill","outline","inputmode","email","placeholder","you@example.com","clearInput","true",1,"mb",3,"errorText"],["formControlName","password","label","Password","placeholder","Enter your password","labelPlacement","stacked","fill","outline","autocomplete","off",1,"mb",3,"errorText","type"],["slot","end","fill","clear","size","small","type","button",3,"click"],[3,"name"],["expand","block","type","submit",1,"regular",3,"disabled"]],template:function(i,e){i&1&&(s(0,"ion-header",0),k(1,"async"),s(2,"ion-toolbar",1)(3,"ion-buttons",2)(4,"ion-button",3),h(5,"ion-icon",4),d()(),s(6,"ion-title",2),f(7,"Signup"),d()()(),s(8,"ion-content",5)(9,"div",6)(10,"ion-card",7)(11,"ion-card-header")(12,"ion-card-subtitle"),f(13,"Sign up to continue practicing ASL and build skills that will open doors to meaningful conversations and connections."),d()(),s(14,"ion-card-content")(15,"form",8),b("ngSubmit",function(){return e.onSubmit()}),h(16,"ion-input",9)(17,"br")(18,"ion-input",10)(19,"br"),s(20,"ion-input",11)(21,"ion-button",12),b("click",function(){return e.showPassword=!e.showPassword}),h(22,"ion-icon",13),d()(),h(23,"br"),s(24,"ion-button",14),f(25," Signup "),d()()()()()()),i&2&&(m("ngClass",P(11,le,T(1,9,e.scrollService.scrollTop$)===0)),o(8),m("fullscreen",!0),o(7),m("formGroup",e.form),o(),g("errorText",e.name!=null&&e.name.hasError("required")?"Name is required":e.name!=null&&e.name.hasError("minlength")?"Name must be at least 2 characters long":e.name!=null&&e.name.hasError("maxlength")?"Name cannot be more than 50 characters long":""),o(2),g("errorText",e.email!=null&&e.email.hasError("required")?"Email is required":e.email!=null&&e.email.hasError("email")?"Please enter a valid email address":e.email!=null&&e.email.hasError("userExists")?"An account with this email already exists":""),o(2),g("errorText",e.password!=null&&e.password.hasError("required")?"Password is required":e.password!=null&&e.password.hasError("minlength")?"Password must be at least 6 characters long":""),m("type",e.showPassword?"text":"password"),o(2),m("name",e.showPassword?"eye-off":"eye"),o(2),m("disabled",e.form.invalid))},dependencies:[N,E,_,V,j,M,R,A,O,B,L,w,W,$,J,U,z,H,x,X,G,Q,K],styles:[".page[_ngcontent-%COMP%]{--background: var(--ion-color-primary-contrast)}.wrap[_ngcontent-%COMP%]{min-height:100%;display:flex;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0!important}ion-card-subtitle[_ngcontent-%COMP%]{font-size:16px!important}"]});let p=u;return p})();export{Ne as RegisterPage};
