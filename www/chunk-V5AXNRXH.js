import{a as fe,b as he,c as bt,d as Tt,e as xt,f as Rt,g as Mt,j as kt,k as Ot,m as Et,n as It,o as Dt,p as Lt,q as At}from"./chunk-S52CO7LW.js";import{a as ue}from"./chunk-ZHDFZB2B.js";import{a as jt}from"./chunk-SMHH257M.js";import"./chunk-FUHXKBJ3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-64PZ3OSN.js";import"./chunk-JHV7MXM5.js";import"./chunk-7ISF44PN.js";import"./chunk-DHGKAU6G.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-WKYNZQQQ.js";import"./chunk-GGIMTWXW.js";import"./chunk-YPOD3FIG.js";import"./chunk-KFC3XH7K.js";import"./chunk-A4LS7W3H.js";import"./chunk-CKP3SGE2.js";import{b as de,f as me,g as _t}from"./chunk-7YAWXMMP.js";import{$ as ke,Aa as w,Ba as gt,Ca as ee,E as q,F as ct,G as h,Ga as Ct,H as k,Ha as yt,Ia as vt,Ib as St,J as X,Ja as te,Lb as ne,Mb as re,O as T,Q as pt,R as y,T as lt,Tb as N,Ub as ie,V as Me,Vb as oe,W as C,Wb as Pt,X as u,Xb as se,Y as _,Z as dt,_ as mt,aa as I,ba as x,bc as ae,ca as b,cc as ce,dc as pe,ia as K,ja as V,jc as le,ka as G,la as A,na as O,oa as D,pa as Z,sa as j,ta as Oe,ua as ft,v as R,va as ht,w as M,wa as ut}from"./chunk-55BITWVR.js";import"./chunk-MTUXJE3Z.js";import"./chunk-RD3XSXCJ.js";import"./chunk-6NUEBUYE.js";import"./chunk-W5FUFK6T.js";import"./chunk-PLFY2CTQ.js";import"./chunk-7PW2J7O2.js";import"./chunk-QIBKRVRZ.js";import"./chunk-WWLKLYXQ.js";import"./chunk-ADUYDX2F.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as qt,g as Y,h as at,j as P}from"./chunk-LRBG2F7K.js";var rt=qt((jn,nt)=>{"use strict";var d={};d.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)};d.localCName=d.generateIdentifier();d.splitLines=function(e){return e.trim().split(`
`).map(n=>n.trim())};d.splitSections=function(e){return e.split(`
m=`).map((i,t)=>(t>0?"m="+i:i).trim()+`\r
`)};d.getDescription=function(e){let n=d.splitSections(e);return n&&n[0]};d.getMediaSections=function(e){let n=d.splitSections(e);return n.shift(),n};d.matchPrefix=function(e,n){return d.splitLines(e).filter(i=>i.indexOf(n)===0)};d.parseCandidate=function(e){let n;e.indexOf("a=candidate:")===0?n=e.substring(12).split(" "):n=e.substring(10).split(" ");let i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let t=8;t<n.length;t+=2)switch(n[t]){case"raddr":i.relatedAddress=n[t+1];break;case"rport":i.relatedPort=parseInt(n[t+1],10);break;case"tcptype":i.tcpType=n[t+1];break;case"ufrag":i.ufrag=n[t+1],i.usernameFragment=n[t+1];break;default:i[n[t]]===void 0&&(i[n[t]]=n[t+1]);break}return i};d.writeCandidate=function(e){let n=[];n.push(e.foundation);let i=e.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(e.protocol.toUpperCase()),n.push(e.priority),n.push(e.address||e.ip),n.push(e.port);let t=e.type;return n.push("typ"),n.push(t),t!=="host"&&e.relatedAddress&&e.relatedPort&&(n.push("raddr"),n.push(e.relatedAddress),n.push("rport"),n.push(e.relatedPort)),e.tcpType&&e.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(n.push("ufrag"),n.push(e.usernameFragment||e.ufrag)),"candidate:"+n.join(" ")};d.parseIceOptions=function(e){return e.substring(14).split(" ")};d.parseRtpMap=function(e){let n=e.substring(9).split(" "),i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i};d.writeRtpMap=function(e){let n=e.payloadType;e.preferredPayloadType!==void 0&&(n=e.preferredPayloadType);let i=e.channels||e.numChannels||1;return"a=rtpmap:"+n+" "+e.name+"/"+e.clockRate+(i!==1?"/"+i:"")+`\r
`};d.parseExtmap=function(e){let n=e.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}};d.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&e.direction!=="sendrecv"?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+`\r
`};d.parseFmtp=function(e){let n={},i,t=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<t.length;r++)i=t[r].trim().split("="),n[i[0].trim()]=i[1];return n};d.writeFmtp=function(e){let n="",i=e.payloadType;if(e.preferredPayloadType!==void 0&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){let t=[];Object.keys(e.parameters).forEach(r=>{e.parameters[r]!==void 0?t.push(r+"="+e.parameters[r]):t.push(r)}),n+="a=fmtp:"+i+" "+t.join(";")+`\r
`}return n};d.parseRtcpFb=function(e){let n=e.substring(e.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}};d.writeRtcpFb=function(e){let n="",i=e.payloadType;return e.preferredPayloadType!==void 0&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(t=>{n+="a=rtcp-fb:"+i+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+`\r
`}),n};d.parseSsrcMedia=function(e){let n=e.indexOf(" "),i={ssrc:parseInt(e.substring(7,n),10)},t=e.indexOf(":",n);return t>-1?(i.attribute=e.substring(n+1,t),i.value=e.substring(t+1)):i.attribute=e.substring(n+1),i};d.parseSsrcGroup=function(e){let n=e.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}};d.getMid=function(e){let n=d.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)};d.parseFingerprint=function(e){let n=e.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}};d.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:d.matchPrefix(e+n,"a=fingerprint:").map(d.parseFingerprint)}};d.writeDtlsParameters=function(e,n){let i="a=setup:"+n+`\r
`;return e.fingerprints.forEach(t=>{i+="a=fingerprint:"+t.algorithm+" "+t.value+`\r
`}),i};d.parseCryptoLine=function(e){let n=e.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}};d.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+(typeof e.keyParams=="object"?d.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+`\r
`};d.parseCryptoKeyParams=function(e){if(e.indexOf("inline:")!==0)return null;let n=e.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}};d.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")};d.getCryptoParameters=function(e,n){return d.matchPrefix(e+n,"a=crypto:").map(d.parseCryptoLine)};d.getIceParameters=function(e,n){let i=d.matchPrefix(e+n,"a=ice-ufrag:")[0],t=d.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&t?{usernameFragment:i.substring(12),password:t.substring(10)}:null};d.writeIceParameters=function(e){let n="a=ice-ufrag:"+e.usernameFragment+`\r
a=ice-pwd:`+e.password+`\r
`;return e.iceLite&&(n+=`a=ice-lite\r
`),n};d.parseRtpParameters=function(e){let n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},t=d.splitLines(e)[0].split(" ");n.profile=t[2];for(let o=3;o<t.length;o++){let s=t[o],a=d.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){let l=d.parseRtpMap(a),c=d.matchPrefix(e,"a=fmtp:"+s+" ");switch(l.parameters=c.length?d.parseFmtp(c[0]):{},l.rtcpFeedback=d.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(d.parseRtcpFb),n.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(l.name.toUpperCase());break;default:break}}}d.matchPrefix(e,"a=extmap:").forEach(o=>{n.headerExtensions.push(d.parseExtmap(o))});let r=d.matchPrefix(e,"a=rtcp-fb:* ").map(d.parseRtcpFb);return n.codecs.forEach(o=>{r.forEach(s=>{o.rtcpFeedback.find(l=>l.type===s.type&&l.parameter===s.parameter)||o.rtcpFeedback.push(s)})}),n};d.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(r=>r.preferredPayloadType!==void 0?r.preferredPayloadType:r.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(r=>{i+=d.writeRtpMap(r),i+=d.writeFmtp(r),i+=d.writeRtcpFb(r)});let t=0;return n.codecs.forEach(r=>{r.maxptime>t&&(t=r.maxptime)}),t>0&&(i+="a=maxptime:"+t+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(r=>{i+=d.writeExtmap(r)}),i};d.parseRtpEncodingParameters=function(e){let n=[],i=d.parseRtpParameters(e),t=i.fecMechanisms.indexOf("RED")!==-1,r=i.fecMechanisms.indexOf("ULPFEC")!==-1,o=d.matchPrefix(e,"a=ssrc:").map(p=>d.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),s=o.length>0&&o[0].ssrc,a,l=d.matchPrefix(e,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(f=>parseInt(f,10)));l.length>0&&l[0].length>1&&l[0][0]===s&&(a=l[0][1]),i.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let m={ssrc:s,codecPayloadType:parseInt(p.parameters.apt,10)};s&&a&&(m.rtx={ssrc:a}),n.push(m),t&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:s,mechanism:r?"red+ulpfec":"red"},n.push(m))}}),n.length===0&&s&&n.push({ssrc:s});let c=d.matchPrefix(e,"b=");return c.length&&(c[0].indexOf("b=TIAS:")===0?c=parseInt(c[0].substring(7),10):c[0].indexOf("b=AS:")===0?c=parseInt(c[0].substring(5),10)*1e3*.95-50*40*8:c=void 0,n.forEach(p=>{p.maxBitrate=c})),n};d.parseRtcpParameters=function(e){let n={},i=d.matchPrefix(e,"a=ssrc:").map(o=>d.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);let t=d.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=t.length>0,n.compound=t.length===0;let r=d.matchPrefix(e,"a=rtcp-mux");return n.mux=r.length>0,n};d.writeRtcpParameters=function(e){let n="";return e.reducedSize&&(n+=`a=rtcp-rsize\r
`),e.mux&&(n+=`a=rtcp-mux\r
`),e.ssrc!==void 0&&e.cname&&(n+="a=ssrc:"+e.ssrc+" cname:"+e.cname+`\r
`),n};d.parseMsid=function(e){let n,i=d.matchPrefix(e,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};let t=d.matchPrefix(e,"a=ssrc:").map(r=>d.parseSsrcMedia(r)).filter(r=>r.attribute==="msid");if(t.length>0)return n=t[0].value.split(" "),{stream:n[0],track:n[1]}};d.parseSctpDescription=function(e){let n=d.parseMLine(e),i=d.matchPrefix(e,"a=max-message-size:"),t;i.length>0&&(t=parseInt(i[0].substring(19),10)),isNaN(t)&&(t=65536);let r=d.matchPrefix(e,"a=sctp-port:");if(r.length>0)return{port:parseInt(r[0].substring(12),10),protocol:n.fmt,maxMessageSize:t};let o=d.matchPrefix(e,"a=sctpmap:");if(o.length>0){let s=o[0].substring(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}};d.writeSctpDescription=function(e,n){let i=[];return e.protocol!=="DTLS/SCTP"?i=["m="+e.kind+" 9 "+e.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+e.kind+" 9 "+e.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")};d.generateSessionId=function(){return Math.random().toString().substr(2,22)};d.writeSessionBoilerplate=function(e,n,i){let t,r=n!==void 0?n:2;return e?t=e:t=d.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+t+" "+r+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`};d.getDirection=function(e,n){let i=d.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2);default:}return n?d.getDirection(n):"sendrecv"};d.getKind=function(e){return d.splitLines(e)[0].split(" ")[0].substring(2)};d.isRejected=function(e){return e.split(" ",2)[1]==="0"};d.parseMLine=function(e){let i=d.splitLines(e)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}};d.parseOLine=function(e){let i=d.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}};d.isValidSDP=function(e){if(typeof e!="string"||e.length===0)return!1;let n=d.splitLines(e);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0};typeof nt=="object"&&(nt.exports=d)});var Ut=!0,zt=!0;function F(e,n,i){let t=e.match(n);return t&&t.length>=i&&parseFloat(t[i],10)}function E(e,n,i){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.addEventListener;t.addEventListener=function(s,a){if(s!==n)return r.apply(this,arguments);let l=c=>{let p=i(c);p&&(a.handleEvent?a.handleEvent(p):a(p))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(a,l),r.apply(this,[s,l])};let o=t.removeEventListener;t.removeEventListener=function(s,a){if(s!==n||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);if(!this._eventMap[n].has(a))return o.apply(this,arguments);let l=this._eventMap[n].get(a);return this._eventMap[n].delete(a),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,l])},Object.defineProperty(t,"on"+n,{get(){return this["_on"+n]},set(s){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),s&&this.addEventListener(n,this["_on"+n]=s)},enumerable:!0,configurable:!0})}function Kt(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ut=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Vt(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(zt=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ge(){if(typeof window=="object"){if(Ut)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function U(e,n){zt&&console.warn(e+" is deprecated, please use "+n+" instead.")}function Gt(e){let n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;let{navigator:i}=e;if(i.userAgentData&&i.userAgentData.brands){let t=i.userAgentData.brands.find(r=>r.brand==="Chromium");if(t)return{browser:"chrome",version:parseInt(t.version,10)}}if(i.mozGetUserMedia)n.browser="firefox",n.version=parseInt(F(i.userAgent,/Firefox\/(\d+)\./,1));else if(i.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=parseInt(F(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=parseInt(F(i.userAgent,/AppleWebKit\/(\d+)\./,1)),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,n._safariVersion=F(i.userAgent,/Version\/(\d+(\.?\d+))/,1);else return n.browser="Not a supported browser.",n;return n}function Ft(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ie(e){return Ft(e)?Object.keys(e).reduce(function(n,i){let t=Ft(e[i]),r=t?Ie(e[i]):e[i],o=t&&!Object.keys(r).length;return r===void 0||o?n:Object.assign(n,{[i]:r})},{}):e}function Ee(e,n,i){!n||i.has(n.id)||(i.set(n.id,n),Object.keys(n).forEach(t=>{t.endsWith("Id")?Ee(e,e.get(n[t]),i):t.endsWith("Ids")&&n[t].forEach(r=>{Ee(e,e.get(r),i)})}))}function De(e,n,i){let t=i?"outbound-rtp":"inbound-rtp",r=new Map;if(n===null)return r;let o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===n.id&&o.push(s)}),o.forEach(s=>{e.forEach(a=>{a.type===t&&a.trackId===s.id&&Ee(e,a,r)})}),r}var ve={};Y(ve,{fixNegotiationNeeded:()=>ze,shimAddTrackRemoveTrack:()=>Ue,shimAddTrackRemoveTrackWithNative:()=>Bt,shimGetSendersWithDtmf:()=>je,shimGetUserMedia:()=>Ce,shimMediaStream:()=>Le,shimOnTrack:()=>Ae,shimPeerConnection:()=>ye,shimSenderReceiverGetStats:()=>Fe});var Nt=ge;function Ce(e,n){let i=e&&e.navigator;if(!i.mediaDevices)return;let t=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;let l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;let p=typeof a[c]=="object"?a[c]:{ideal:a[c]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);let m=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(p.ideal!==void 0){l.optional=l.optional||[];let f={};typeof p.ideal=="number"?(f[m("min",c)]=p.ideal,l.optional.push(f),f={},f[m("max",c)]=p.ideal,l.optional.push(f)):(f[m("",c)]=p.ideal,l.optional.push(f))}p.exact!==void 0&&typeof p.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[m("",c)]=p.exact):["min","max"].forEach(f=>{p[f]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[m(f,c)]=p[f])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},r=function(a,l){if(n.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){let c=function(p,m,f){m in p&&!(f in p)&&(p[f]=p[m],delete p[m])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=t(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});let p=n.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete a.video.facingMode;let m;if(c.exact==="environment"||c.ideal==="environment"?m=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(m=["front"]),m)return i.mediaDevices.enumerateDevices().then(f=>{f=f.filter(v=>v.kind==="videoinput");let g=f.find(v=>m.some(S=>v.label.toLowerCase().includes(S)));return!g&&f.length&&m.includes("back")&&(g=f[f.length-1]),g&&(a.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),a.video=t(a.video),Nt("chrome: "+JSON.stringify(a)),l(a)})}a.video=t(a.video)}return Nt("chrome: "+JSON.stringify(a)),l(a)},o=function(a){return n.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,l,c){r(a,p=>{i.webkitGetUserMedia(p,l,m=>{c&&c(o(m))})})};if(i.getUserMedia=s.bind(i),i.mediaDevices.getUserMedia){let a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(l){return r(l,c=>a(c).then(p=>{if(c.audio&&!p.getAudioTracks().length||c.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(o(p))))}}}function Le(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Ae(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});let n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===r.track.id):o={track:r.track};let s=new Event("track");s.track=r.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[t.stream],this.dispatchEvent(s)}),t.stream.getTracks().forEach(r=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===r.id):o={track:r};let s=new Event("track");s.track=r,s.receiver=o,s.transceiver={receiver:o},s.streams=[t.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else E(e,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function je(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let n=function(r,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=r.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:r}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){let c=r.apply(this,arguments);return c||(c=n(this,a),this._senders.push(c)),c};let o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);let l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}let i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(n(this,s))})};let t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],t.apply(this,[o]),o.getTracks().forEach(s=>{let a=this._senders.find(l=>l.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let n=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let t=n.apply(this,[]);return t.forEach(r=>r._pc=this),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Fe(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){let o=i.apply(this,[]);return o.forEach(s=>s._pc=this),o});let t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){let o=t.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){let o=this;return this._pc.getStats().then(s=>De(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){let r=i.apply(this,[]);return r.forEach(o=>o._pc=this),r}),E(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){let r=this;return this._pc.getStats().then(o=>De(o,r.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;let n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let t=arguments[0],r,o,s;return this.getSenders().forEach(a=>{a.track===t&&(r?s=!0:r=a)}),this.getReceivers().forEach(a=>(a.track===t&&(o?s=!0:o=a),a.track===t)),s||r&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function Bt(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};let n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let l=n.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};let i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(m=>m.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});let a=this.getSenders();i.apply(this,arguments);let l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(l)};let t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],t.apply(this,arguments)};let r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{let l=this._shimmedLocalStreams[a].indexOf(s);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),r.apply(this,arguments)}}function Ue(e,n){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return Bt(e);let i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let p=i.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};let t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(g=>g.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){let m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}t.apply(this,[p])};let r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(S=>S===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let v=this._streams[m.id];if(v)v.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let S=new e.MediaStream([p]);this._streams[m.id]=S,this._reverseStreams[S.id]=m,this.addStream(S)}return this.getSenders().find(S=>S.track===p)};function o(c,p){let m=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{let g=c._reverseStreams[f],v=c._streams[g.id];m=m.replace(new RegExp(v.id,"g"),g.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function s(c,p){let m=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{let g=c._reverseStreams[f],v=c._streams[g.id];m=m.replace(new RegExp(g.id,"g"),v.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(c){let p=e.RTCPeerConnection.prototype[c],m={[c](){let f=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[v=>{let S=o(this,v);f[0].apply(null,[S])},v=>{f[1]&&f[1].apply(null,v)},arguments[2]]):p.apply(this,arguments).then(v=>o(this,v))}};e.RTCPeerConnection.prototype[c]=m[c]});let a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};let l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let c=l.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(S=>p.track===S)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ye(e,n){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){let t=e.RTCPeerConnection.prototype[i],r={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=r[i]})}function ze(e,n){E(e,"negotiationneeded",i=>{let t=i.target;if(!((n.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return i})}var _e={};Y(_e,{shimAddTransceiver:()=>We,shimCreateAnswer:()=>Qe,shimCreateOffer:()=>He,shimGetDisplayMedia:()=>Wt,shimGetParameters:()=>Je,shimGetUserMedia:()=>Se,shimOnTrack:()=>Ke,shimPeerConnection:()=>Pe,shimRTCDataChannel:()=>Be,shimReceiverGetStats:()=>Ge,shimRemoveStream:()=>Ne,shimSenderGetStats:()=>Ve});function Se(e,n){let i=e&&e.navigator,t=e&&e.MediaStreamTrack;if(i.getUserMedia=function(r,o,s){U("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(r).then(o,s)},!(n.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){let r=function(s,a,l){a in s&&!(l in s)&&(s[l]=s[a],delete s[a])},o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),r(s.audio,"autoGainControl","mozAutoGainControl"),r(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},t&&t.prototype.getSettings){let s=t.prototype.getSettings;t.prototype.getSettings=function(){let a=s.apply(this,arguments);return r(a,"mozAutoGainControl","autoGainControl"),r(a,"mozNoiseSuppression","noiseSuppression"),a}}if(t&&t.prototype.applyConstraints){let s=t.prototype.applyConstraints;t.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a,"autoGainControl","mozAutoGainControl"),r(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function Wt(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){let r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return t.video===!0?t.video={mediaSource:n}:t.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(t)})}function Ke(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pe(e,n){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){let o=e.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=s[r]});let i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[o,s,a]=arguments;return t.apply(this,[o||null]).then(l=>{if(n.version<53&&!s)try{l.forEach(c=>{c.type=i[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((p,m)=>{l.set(m,Object.assign({},p,{type:i[p.type]||p.type}))})}return l}).then(s,a)}}function Ve(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){let r=n.apply(this,[]);return r.forEach(o=>o._pc=this),r});let i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){let r=i.apply(this,arguments);return r._pc=this,r}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ge(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){let t=n.apply(this,[]);return t.forEach(r=>r._pc=this),t}),E(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ne(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){U("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&i.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Be(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function We(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let n=e.RTCPeerConnection.prototype.addTransceiver;n&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];let r=t.length>0;r&&t.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let o=n.apply(this,arguments);if(r){let{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=t,s.sendEncodings=t,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function Je(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;let n=e.RTCRtpSender.prototype.getParameters;n&&(e.RTCRtpSender.prototype.getParameters=function(){let t=n.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function He(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function Qe(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;let n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}var be={};Y(be,{shimAudioContext:()=>tt,shimCallbacksAPI:()=>qe,shimConstraints:()=>Jt,shimCreateOfferLegacy:()=>et,shimGetUserMedia:()=>Xe,shimLocalStreamsAPI:()=>$e,shimRTCIceServerUrls:()=>Ze,shimRemoteStreamsAPI:()=>Ye,shimTrackEventTransceiver:()=>we});function $e(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(r=>n.call(this,r,t)),t.getVideoTracks().forEach(r=>n.call(this,r,t))},e.RTCPeerConnection.prototype.addTrack=function(t,...r){return r&&r.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);let t=this._localStreams.indexOf(i);if(t===-1)return;this._localStreams.splice(t,1);let r=i.getTracks();this.getSenders().forEach(o=>{r.includes(o.track)&&this.removeTrack(o)})})}}function Ye(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);let o=new Event("addstream");o.stream=r,this.dispatchEvent(o)})})}});let n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(o=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(o)>=0)return;t._remoteStreams.push(o);let s=new Event("addstream");s.stream=o,t.dispatchEvent(s)})}),n.apply(t,arguments)}}}function qe(e){if(typeof e!="object"||!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.createOffer,t=n.createAnswer,r=n.setLocalDescription,o=n.setRemoteDescription,s=n.addIceCandidate;n.createOffer=function(c,p){let m=arguments.length>=2?arguments[2]:arguments[0],f=i.apply(this,[m]);return p?(f.then(c,p),Promise.resolve()):f},n.createAnswer=function(c,p){let m=arguments.length>=2?arguments[2]:arguments[0],f=t.apply(this,[m]);return p?(f.then(c,p),Promise.resolve()):f};let a=function(l,c,p){let m=r.apply(this,[l]);return p?(m.then(c,p),Promise.resolve()):m};n.setLocalDescription=a,a=function(l,c,p){let m=o.apply(this,[l]);return p?(m.then(c,p),Promise.resolve()):m},n.setRemoteDescription=a,a=function(l,c,p){let m=s.apply(this,[l]);return p?(m.then(c,p),Promise.resolve()):m},n.addIceCandidate=a}function Xe(e){let n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){let i=n.mediaDevices,t=i.getUserMedia.bind(i);n.mediaDevices.getUserMedia=r=>t(Jt(r))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(t,r,o){n.mediaDevices.getUserMedia(t).then(r,o)}).bind(n))}function Jt(e){return e&&e.video!==void 0?Object.assign({},e,{video:Ie(e.video)}):e}function Ze(e){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection;e.RTCPeerConnection=function(t,r){if(t&&t.iceServers){let o=[];for(let s=0;s<t.iceServers.length;s++){let a=t.iceServers[s];a.urls===void 0&&a.url?(U("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(t.iceServers[s])}t.iceServers=o}return new n(t,r)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return n.generateCertificate}})}function we(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function et(e){let n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);let r=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):t.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);let o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):t.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function tt(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var it={};Y(it,{removeExtmapAllowMixed:()=>Re,shimAddIceCandidateNullOrEmpty:()=>H,shimConnectionState:()=>xe,shimMaxMessageSize:()=>W,shimParameterlessSetLocalDescription:()=>Q,shimRTCIceCandidate:()=>B,shimRTCIceCandidateRelayProtocol:()=>Te,shimSendThrowTypeError:()=>J});var z=at(rt());function B(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let n=e.RTCIceCandidate;e.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){let r=new n(t),o=z.default.parseCandidate(t.candidate);for(let s in o)s in r||Object.defineProperty(r,s,{value:o[s]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new n(t)},e.RTCIceCandidate.prototype=n.prototype,E(e,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new e.RTCIceCandidate(i.candidate),writable:"false"}),i))}function Te(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||E(e,"icecandidate",n=>{if(n.candidate){let i=z.default.parseCandidate(n.candidate.candidate);i.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[i.priority>>24])}return n})}function W(e,n){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});let i=function(a){if(!a||!a.sdp)return!1;let l=z.default.splitSections(a.sdp);return l.shift(),l.some(c=>{let p=z.default.parseMLine(c);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},t=function(a){let l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;let c=parseInt(l[1],10);return c!==c?-1:c},r=function(a){let l=65536;return n.browser==="firefox"&&(n.version<57?a===-1?l=16384:l=2147483637:n.version<60?l=n.version===57?65535:65536:l=2147483637),l},o=function(a,l){let c=65536;n.browser==="firefox"&&n.version===57&&(c=65535);let p=z.default.matchPrefix(a.sdp,"a=max-message-size:");return p.length>0?c=parseInt(p[0].substring(19),10):n.browser==="firefox"&&l!==-1&&(c=2147483637),c},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){let{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){let l=t(arguments[0]),c=r(l),p=o(arguments[0],l),m;c===0&&p===0?m=Number.POSITIVE_INFINITY:c===0||p===0?m=Math.max(c,p):m=Math.min(c,p);let f={};Object.defineProperty(f,"maxMessageSize",{get(){return m}}),this._sctp=f}return s.apply(this,arguments)}}function J(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function n(t,r){let o=t.send;t.send=function(){let a=arguments[0],l=a.length||a.size||a.byteLength;if(t.readyState==="open"&&r.sctp&&l>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return o.apply(t,arguments)}}let i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let r=i.apply(this,arguments);return n(r,this),r},E(e,"datachannel",t=>(n(t.channel,t.target),t))}function xe(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{let t=n[i];n[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{let o=r.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;let s=new Event("connectionstatechange",r);o.dispatchEvent(s)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function Re(e,n){if(!e.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n._safariVersion>=13.1)return;let i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let o=r.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&r instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:r.type,sdp:o}):r.sdp=o}return i.apply(this,arguments)}}function H(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let i=e.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Q(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let i=e.RTCPeerConnection.prototype.setLocalDescription;!i||i.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return i.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?i.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>i.apply(this,[s]))})}var Xt=at(rt());function Ht({window:e}={},n={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){let i=ge,t=Gt(e),r={browserDetails:t,commonShim:it,extractVersion:F,disableLog:Kt,disableWarnings:Vt,sdp:Xt};switch(t.browser){case"chrome":if(!ve||!ye||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),r;if(t.version===null)return i("Chrome shim can not determine version, not shimming."),r;i("adapter.js shimming chrome."),r.browserShim=ve,H(e,t),Q(e,t),Ce(e,t),Le(e,t),ye(e,t),Ae(e,t),Ue(e,t),je(e,t),Fe(e,t),ze(e,t),B(e,t),Te(e,t),xe(e,t),W(e,t),J(e,t),Re(e,t);break;case"firefox":if(!_e||!Pe||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=_e,H(e,t),Q(e,t),Se(e,t),Pe(e,t),Ke(e,t),Ne(e,t),Ve(e,t),Ge(e,t),Be(e,t),We(e,t),Je(e,t),He(e,t),Qe(e,t),B(e,t),xe(e,t),W(e,t),J(e,t);break;case"safari":if(!be||!n.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=be,H(e,t),Q(e,t),Ze(e,t),et(e,t),qe(e,t),$e(e,t),Ye(e,t),we(e,t),Xe(e,t),tt(e,t),B(e,t),Te(e,t),W(e,t),J(e,t),Re(e,t);break;default:i("Unsupported browser!");break}return r}var zn=Ht({window:typeof window>"u"?void 0:window});var on=["videoEl"],sn=["canvasEl"],an=e=>({"no-shadow":e}),cn=e=>({correct:e});function pn(e,n){e&1&&_(0,"div",24)}function ln(e,n){if(e&1&&(C(0,"div",25),O(1),u()),e&2){let i=b();h(),D(i.unsupportedMsg)}}function dn(e,n){if(e&1){let i=I();C(0,"button",26),x("click",function(){R(i);let r=b();return M(r.onTapToStart())}),O(1," Tap to start camera "),u()}}function mn(e,n){if(e&1&&_(0,"img",27),e&2){let i=b();y("src",i.previewSrc,q)}}function fn(e,n){if(e&1&&(C(0,"div",28)(1,"span",29),O(2),u(),C(3,"span",30),O(4),Oe(5,"number"),u()()),e&2){let i=b();h(2),D(i.liveLabel),h(2),Z("",ht(5,2,i.liveConfidence*100,"1.0-1"),"%")}}function hn(e,n){if(e&1&&(C(0,"span",31),O(1),u()),e&2){let i=b();y("ngClass",j(2,cn,i.resultText.toLowerCase().includes("correct"))),h(),D(i.resultText)}}function un(e,n){e&1&&_(0,"div",32)}function gn(e,n){if(e&1){let i=I();C(0,"ion-button",33),x("click",function(){R(i);let r=b();return M(r.onRetry())}),_(1,"ion-icon",34),u()}}function Cn(e,n){if(e&1){let i=I();C(0,"ion-fab",35)(1,"ion-fab-button",36),x("click",function(){R(i);let r=b();return M(r.switchCamera())}),_(2,"ion-icon",37),u()()}}var Qt=(()=>{let n=class n{constructor(t,r,o,s,a){this.modalCtrl=t,this.scrollService=r,this.storageService=o,this.apiKeyManagementService=s,this.alertController=a,this.MODEL_SLUG="asl-alphabet-recognition",this.MODEL_VERSION="7",this.targetLetter="A",this.frameIntervalMs=1e3,this.minVoteConfidence=.45,this.maxWaitMs=3e4,this.running=!1,this.isScanning=!1,this.isWaiting=!1,this.showRetry=!1,this.resultText="",this.liveLabel="",this.liveConfidence=0,this.previewSrc=null,this.stream=null,this.needsTapToStart=!1,this.unsupportedMsg=null,this.showSplash=!0,this.currentFacing="environment",this.hasMultipleCams=!1,this.apiKeyReloadInFlight=!1,this.lastForbiddenAt=0,fe({arrowBack:he,repeat:It,cameraReverse:Tt})}ngOnInit(){return P(this,null,function*(){if(this.loadAPIKey(),this.captureCanvas=document.createElement("canvas"),!this.ensureGetUserMedia()){this.unsupportedMsg="Camera not supported in this WebView. Please update Android System WebView / iOS.";return}let t=yield this.storageService.getCameraFacing();(t==="user"||t==="environment")&&(this.currentFacing=t),yield this.startCamera(),this.startScanningUntilHit(),new ResizeObserver(()=>this.fitCanvasToWrapper()).observe(document.querySelector(".video-wrap"))})}ngOnDestroy(){this.stopScanning(),this.releaseCamera()}ionViewWillLeave(){var t;this.resultText&&((t=this.resultText)!=null&&t.toString().toLowerCase().includes("correct"))&&this.logCompleted()}ensureGetUserMedia(){let t=navigator;if("mediaDevices"in navigator||(t.mediaDevices={}),!navigator.mediaDevices.getUserMedia){let r=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia;if(!r)return!1;t.mediaDevices.getUserMedia=o=>new Promise((s,a)=>r.call(navigator,o,s,a))}return!0}waitLoadedMetadata(t){return new Promise(r=>{if(t.readyState>=1&&t.videoWidth&&t.videoHeight)return r();t.addEventListener("loadedmetadata",()=>r(),{once:!0})})}waitCanPlay(t){return new Promise(r=>{if(t.readyState>=2)return r();t.addEventListener("canplay",()=>r(),{once:!0})})}getDeviceIdForFacing(t){return P(this,null,function*(){try{let o=(yield navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput");if(o.length===0)return null;if(o.length===1)return o[0].deviceId;let s=o.find(a=>{let l=(a.label||"").toLowerCase();return l?t==="environment"?l.includes("back")||l.includes("rear")||l.includes("environment"):l.includes("front")||l.includes("user"):!1});return s?s.deviceId:(t==="environment"?o[o.length-1]:o[0]).deviceId}catch{return null}})}startCamera(){return P(this,null,function*(){this.showSplash=!0;let t=this.videoEl.nativeElement;t.muted=!0,t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("autoplay",""),t.setAttribute("preload","auto"),t.setAttribute("disablePictureInPicture",""),t.setAttribute("controlsList","nodownload noplaybackrate noremoteplayback");let r=()=>P(this,null,function*(){return navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:this.currentFacing}},audio:!1})}),o=()=>P(this,null,function*(){let s=yield this.getDeviceIdForFacing(this.currentFacing);if(!s)throw new Error("No suitable camera deviceId");return navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s}},audio:!1})});try{try{this.stream=yield r()}catch{this.stream=yield o()}t.srcObject=this.stream;try{let s=yield navigator.mediaDevices.enumerateDevices();this.hasMultipleCams=s.filter(a=>a.kind==="videoinput").length>1}catch{this.hasMultipleCams=!1}yield this.waitLoadedMetadata(t);try{yield t.play(),this.needsTapToStart=!1}catch{this.needsTapToStart=!0}yield this.waitCanPlay(t)}catch(s){console.error("getUserMedia failed:",s),this.unsupportedMsg="Unable to open camera on this device."}this.showSplash=!1,this.storageService.setCameraFacing(this.currentFacing)})}onTapToStart(){return P(this,null,function*(){try{yield this.videoEl.nativeElement.play(),this.needsTapToStart=!1}catch(t){console.warn("play() still blocked",t)}})}releaseCamera(){var r;let t=(r=this.videoEl)==null?void 0:r.nativeElement;t!=null&&t.srcObject&&(t.srcObject.getTracks().forEach(o=>o.stop()),t.srcObject=null),this.stream&&(this.stream=null)}switchCamera(){return P(this,null,function*(){this.currentFacing=this.currentFacing==="user"?"environment":"user",this.releaseCamera(),yield this.startCamera()})}startScanningUntilHit(){this.running||(this.running=!0,this.previewSrc=null,this.resultText="",this.liveLabel="",this.liveConfidence=0,this.showRetry=!1,this.isScanning=!0,this.frameTimer=setInterval(()=>this.captureAndPredictOnce().catch(console.error),this.frameIntervalMs),this.timeoutTimer=setTimeout(()=>{this.running&&(this.stopScanning(),this.resultText="Time out \u2014 try again",this.capturePreview(),this.showRetry=!0)},this.maxWaitMs))}stopScanning(){this.running=!1,this.frameTimer&&(clearInterval(this.frameTimer),this.frameTimer=null),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.isScanning=!1,this.isWaiting=!1}captureAndPredictOnce(){return P(this,null,function*(){var t,r;if(!this.isWaiting)try{let o=this.videoEl.nativeElement;if(o.videoWidth===0||o.videoHeight===0||o.readyState<2)return;let s=this.captureCanvas;s.width=o.videoWidth,s.height=o.videoHeight;let a=s.getContext("2d");if(!a)return;a.drawImage(o,0,0,s.width,s.height);let l=s.toDataURL("image/jpeg",.9).split(",")[1];this.isWaiting=!0;let c=`https://classify.roboflow.com/${this.MODEL_SLUG}/${this.MODEL_VERSION}?api_key=${(t=this.API_KEY)!=null?t:""}`,p=yield fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!p.ok){yield this.handleRoboflowError(p),this.isWaiting=!1;return}let m=yield p.json();if((r=m.predictions)!=null&&r.length){let v=[...m.predictions].sort((S,$)=>$.confidence-S.confidence)[0];this.liveLabel=v.class.toUpperCase(),this.liveConfidence=v.confidence}else this.liveLabel="",this.liveConfidence=0;let f=this.targetLetter.toUpperCase();(m.predictions||[]).some(v=>{var S;return((S=v.class)==null?void 0:S.toUpperCase())===f&&v.confidence>=this.minVoteConfidence})&&(console.log("found image",s.toDataURL("image/jpeg",.9)),this.stopScanning(),this.resultText="Correct!",this.capturePreview(),this.showRetry=!0,this.logCompleted()),this.isWaiting=!1,this.drawOverlay()}catch(o){this.isWaiting=!1,console.warn("captureAndPredictOnce error:",o)}})}handleRoboflowError(t){return P(this,null,function*(){var o,s,a,l;let r=t.status===401||t.status===403;try{if((t.headers.get("content-type")||"").includes("application/json")){let p=yield t.json().catch(()=>null);p!=null&&p.message&&typeof p.message=="string"&&(p.message.toLowerCase().includes("forbidden")||p.message.toLowerCase().includes("unauthorized"))&&(r=!0)}else(yield t.text().catch(()=>"")).toLowerCase().includes("forbidden")&&(r=!0)}catch{}if(r){(s=(o=this.apiKeyManagementService)==null?void 0:o.currentAPIKey)!=null&&s.id&&(yield this.apiKeyManagementService.markAsExpired((l=(a=this.apiKeyManagementService)==null?void 0:a.currentAPIKey)==null?void 0:l.id).toPromise());let c=Date.now();if(!this.apiKeyReloadInFlight&&c-this.lastForbiddenAt>3e3){this.apiKeyReloadInFlight=!0,this.lastForbiddenAt=c;try{this.storageService.saveAPIKey(null),this.apiKeyManagementService.setCurrentAPIKey(null),this.loadAPIKey(!0)}finally{setTimeout(()=>this.apiKeyReloadInFlight=!1,1500)}}}})}fitCanvasToWrapper(){var o;let t=document.querySelector(".video-wrap"),r=(o=this.canvasEl)==null?void 0:o.nativeElement;!t||!r||(r.style.width="100%",r.style.height="100%")}drawOverlay(){let t=this.canvasEl.nativeElement,r=t.getBoundingClientRect(),o=Math.max(1,Math.floor(r.width)),s=Math.max(1,Math.floor(r.height));(t.width!==o||t.height!==s)&&(t.width=o,t.height=s);let a=t.getContext("2d");if(!a)return;a.clearRect(0,0,o,s);let l=Math.floor(o*.55),c=Math.floor(s*.55),p=Math.floor((o-l)/2),m=Math.floor((s-c)/2);a.save(),a.lineWidth=3,a.setLineDash([8,6]),a.strokeStyle="rgba(30,144,255,0.9)",a.strokeRect(p,m,l,c),a.restore()}capturePreview(){let t=this.videoEl.nativeElement,o=this.canvasEl.nativeElement.getBoundingClientRect(),s=Math.max(1,Math.floor(o.width)),a=Math.max(1,Math.floor(o.height)),l=document.createElement("canvas");l.width=s,l.height=a;let c=l.getContext("2d");if(!c)return;c.fillStyle="#000",c.fillRect(0,0,s,a);let p=t.videoWidth,m=t.videoHeight;if(p&&m){let $=Math.min(s/p,a/m),ot=Math.floor(p*$),st=Math.floor(m*$),$t=Math.floor((s-ot)/2),Yt=Math.floor((a-st)/2);c.drawImage(t,$t,Yt,ot,st)}c.save(),c.lineWidth=3,c.setLineDash([8,6]),c.strokeStyle="rgba(30,144,255,0.9)";let f=Math.floor(s*.55),g=Math.floor(a*.55),v=Math.floor((s-f)/2),S=Math.floor((a-g)/2);c.strokeRect(v,S,f,g),c.restore(),this.previewSrc=l.toDataURL("image/png")}onRetry(){this.resultText="",this.previewSrc=null,this.showRetry=!1,this.startScanningUntilHit()}close(){return P(this,null,function*(){let t=yield this.modalCtrl.getTop();t==null||t.dismiss({result:this.resultText,currentFacing:this.currentFacing})})}logCompleted(){let t=[...this.currentProfile.progress.alphabet.compeleted];t.some(r=>r.toLowerCase().includes(this.targetLetter.toLowerCase()))||t.push(this.targetLetter),this.currentProfile.progress.alphabet.compeleted=t,this.storageService.saveProfile(this.currentProfile)}loadAPIKey(t=!1){var r,o;(o=(r=this.apiKeyManagementService)==null?void 0:r.currentAPIKey)!=null&&o.apiKey?this.API_KEY=this.apiKeyManagementService.currentAPIKey.apiKey:this.apiKeyManagementService.get(t).subscribe(s=>{s&&s.data&&s.data.apiKey?(this.storageService.saveAPIKey(s.data),this.apiKeyManagementService.setCurrentAPIKey(s.data),this.API_KEY=s.data.apiKey):this.presentAlertMessage("Error","Failed to load API key. Please try again later.",[{text:"OK",role:"",cssClass:"alert-button-ok",handler:()=>P(this,null,function*(){this.close()})}])},()=>{this.presentAlertMessage("Error","Failed to load API key. Please try again later.",[{text:"OK",role:"",cssClass:"alert-button-ok",handler:()=>P(this,null,function*(){this.close()})}])})}presentAlertMessage(t,r,o){return P(this,null,function*(){(!o||o.length===0)&&(o=[{text:"OK",role:"cancel",cssClass:"alert-button-ok"}]),yield(yield this.alertController.create({header:t,message:r,buttons:o})).present()})}};n.\u0275fac=function(r){return new(r||n)(k(pe),k(ue),k(de),k(me),k(jt))},n.\u0275cmp=X({type:n,selectors:[["app-scan"]],viewQuery:function(r,o){if(r&1&&(K(on,7),K(sn,7)),r&2){let s;V(s=G())&&(o.videoEl=s.first),V(s=G())&&(o.canvasEl=s.first)}},decls:30,vars:19,consts:[["canvasEl",""],["videoEl",""],[3,"translucent","ngClass"],["slot","start"],[3,"click"],["name","arrow-back","slot","icon-only"],[2,"text-align","center"],["slot","end",2,"width","48px"],[2,"margin","0"],[3,"fullscreen"],[1,"stage","fullscreen"],[1,"video-wrap"],[3,"hidden"],["class","video-splash",4,"ngIf"],["autoplay","","playsinline","","muted","",3,"hidden"],["class","unsupported-msg",4,"ngIf"],["class","tap-start",3,"click",4,"ngIf"],["alt","ASL snapshot","class","preview-img",3,"src",4,"ngIf"],["class","live-pill safe-botom",4,"ngIf"],["class","result safe-botom",3,"ngClass",4,"ngIf"],[1,"bottom-ctr","safe-botom"],["class","spinner-scan","aria-label","scanning...",4,"ngIf"],["class","retry-btn","size","large","shape","round","fill","solid",3,"click",4,"ngIf"],["class","fab-switch","vertical","bottom","horizontal","end",4,"ngIf"],[1,"video-splash"],[1,"unsupported-msg"],[1,"tap-start",3,"click"],["alt","ASL snapshot",1,"preview-img",3,"src"],[1,"live-pill","safe-botom"],[1,"cls"],[1,"pct"],[1,"result","safe-botom",3,"ngClass"],["aria-label","scanning...",1,"spinner-scan"],["size","large","shape","round","fill","solid",1,"retry-btn",3,"click"],["name","repeat"],["vertical","bottom","horizontal","end",1,"fab-switch"],["size","small","aria-label","Switch camera",3,"click"],["name","camera-reverse"]],template:function(r,o){if(r&1){let s=I();C(0,"ion-header",2),Oe(1,"async"),C(2,"ion-toolbar")(3,"ion-buttons",3)(4,"ion-button",4),x("click",function(){return R(s),M(o.close())}),_(5,"ion-icon",5),u()(),C(6,"ion-title",6),O(7,"Scan"),u(),_(8,"div",7),u(),C(9,"ion-toolbar")(10,"ion-title",6)(11,"h1",8),O(12),u()()()(),C(13,"ion-content",9)(14,"div",10)(15,"div",11),_(16,"canvas",12,0),T(18,pn,1,0,"div",13),_(19,"video",14,1),T(21,ln,2,1,"div",15)(22,dn,2,0,"button",16)(23,mn,1,1,"img",17)(24,fn,6,5,"div",18)(25,hn,2,4,"span",19),C(26,"div",20),T(27,un,1,0,"div",21)(28,gn,2,0,"ion-button",22),u(),T(29,Cn,3,0,"ion-fab",23),u()()()}r&2&&(y("translucent",!0)("ngClass",j(17,an,ft(1,15,o.scrollService.scrollTop$)===0)),h(12),D(o.targetLetter),h(),y("fullscreen",!0),h(3),y("hidden",!!o.previewSrc),h(2),y("ngIf",o.showSplash&&!o.previewSrc),h(),y("hidden",!!o.previewSrc),h(2),y("ngIf",o.unsupportedMsg),h(),y("ngIf",o.needsTapToStart&&!o.previewSrc&&!o.unsupportedMsg),h(),y("ngIf",o.previewSrc),h(),y("ngIf",o.isScanning&&o.liveLabel),h(),y("ngIf",o.resultText),h(2),y("ngIf",o.isScanning),h(),y("ngIf",o.showRetry),h(),y("ngIf",o.hasMultipleCams))},dependencies:[te,w,ee,yt,vt,N,se,ae,ce,ne,re,le,ie,oe],styles:["[_nghost-%COMP%]{--ion-background-color: #000}ion-content[_ngcontent-%COMP%]{--background: #000}.stage.fullscreen[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;width:100vw;height:100vh;overflow:hidden;background:#000}.video-wrap[_ngcontent-%COMP%]{position:relative;top:0;right:0;bottom:0;left:0;width:100%;height:100%;display:flex}video[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;object-fit:contain;background:#000;border:0;position:absolute;width:100%!important;height:480px!important;transform:translateY(25%)}video[_ngcontent-%COMP%]::-webkit-media-controls, video[_ngcontent-%COMP%]::-webkit-media-controls-enclosure, video[_ngcontent-%COMP%]::-webkit-media-controls-overlay-play-button, video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button{display:none!important}canvas[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;pointer-events:none;border:0;object-fit:contain;position:absolute;z-index:99;width:100%!important;height:480px!important;transform:translateY(25%)}ion-header[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, .3);--ion-color-base: transparent;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);color:#fff}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #fff}.live-pill[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:116px;transform:translate(-50%);z-index:110;display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;background:#0000008c;color:#fff;border:1.5px solid rgba(255,255,255,.9);font-weight:600}.live-pill[_ngcontent-%COMP%]   .cls[_ngcontent-%COMP%]{text-transform:uppercase}.live-pill[_ngcontent-%COMP%]   .pct[_ngcontent-%COMP%]{opacity:.95}.result[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:20px;position:absolute;left:50%;bottom:166px;transform:translate(-50%);z-index:110;background-color:#000;padding:5px 10px;border-radius:10px}.result[_ngcontent-%COMP%]:not(.correct){color:#f2a6a6}.preview-img[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;object-fit:contain;background:#000;z-index:100}.bottom-ctr[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:24px;transform:translate(-50%);z-index:110;display:grid;place-items:center}.spinner-scan[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;border:4px solid rgba(255,255,255,.25);border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.retry-btn[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .15);--background-activated: rgba(255, 255, 255, .25);--border-radius: 50%;--padding-start: 0;--padding-end: 0;width:70px;height:70px;display:grid;place-items:center;margin-top:8px}.retry-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#fff}.tap-start[_ngcontent-%COMP%], .unsupported-msg[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);z-index:120;color:#fff;text-align:center}.tap-start[_ngcontent-%COMP%]{bottom:90px;padding:10px 16px;border-radius:999px;border:none;background:#ffffff24;font-weight:700;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.unsupported-msg[_ngcontent-%COMP%]{bottom:32px;width:88%;opacity:.9;font-weight:600;line-height:1.2}.video-splash[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:#000;z-index:100}video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button, video[_ngcontent-%COMP%]::-webkit-media-controls-overlay-play-button{display:none!important}.safe-botom[_ngcontent-%COMP%]{margin-bottom:calc(var(--safe-bottom, 0))!important}.fab-switch[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:24px;z-index:120;margin-bottom:calc(var(--safe-bottom, 0))!important}.switch-btn[_ngcontent-%COMP%]{--background: rgba(255,255,255,.15);--background-activated: rgba(255,255,255,.25);--border-radius: 50%;width:48px;height:48px;margin-top:10px}.switch-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px}"]});let e=n;return e})();var yn=e=>({"no-shadow":e}),vn=e=>({show:e});function Sn(e,n){e&1&&(C(0,"div",11),_(1,"ion-icon",27),u())}function Pn(e,n){if(e&1&&_(0,"img",28),e&2){let i=b();y("src",i.imgSrc,q)("alt","ASL letter "+i.selected)}}function _n(e,n){e&1&&ke(0)}function bn(e,n){e&1&&_(0,"ion-icon",23)}function Tn(e,n){e&1&&_(0,"ion-icon",24)}function xn(e,n){e&1&&ke(0)}function Rn(e,n){if(e&1){let i=I();C(0,"ion-button",32),x("click",function(){let r=R(i).$implicit,o=b(3),s=A(16);return o.selectLetter(r),M(s.activated=!1)}),O(1),u()}if(e&2){let i=n.$implicit,t=b(3);lt("active",t.selected===i),pt("aria-pressed",t.selected===i),h(),Z(" ",i," ")}}function Mn(e,n){if(e&1&&(dt(0),T(1,Rn,2,4,"ion-button",31),mt()),e&2){let i=b(2);h(),y("ngForOf",i.letters)}}function kn(e,n){if(e&1&&(C(0,"div",29),T(1,Mn,2,1,"ng-container",30),u()),e&2){let i=b();y("ngClass",j(2,vn,i.showKeyPad)),h(),y("ngIf",i.showKeyPad)}}var tr=(()=>{let n=class n{get imgSrc(){var t;return(t=this.imgByLetter[this.selected])!=null?t:""}get isComplted(){var t,r,o,s,a,l,c;return(o=(r=(t=this.currentProfile)==null?void 0:t.progress)==null?void 0:r.alphabet)!=null&&o.compeleted?(c=(l=(a=(s=this.currentProfile)==null?void 0:s.progress)==null?void 0:a.alphabet)==null?void 0:l.compeleted)==null?void 0:c.some(p=>p.toLowerCase()===this.selected.toLowerCase()):!1}constructor(t,r,o,s,a){this.scrollService=t,this.modalCtrl=r,this.authService=o,this.storageService=s,this.apiKeyManagementService=a,this.letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),this.imgByLetter=this.letters.reduce((l,c)=>(l[c]=`assets/asl/${c}.png`,l),{}),this.selected="A",this.showKeyPad=!1,this.showShadow=!1,this.cameraFacing="environment",this.storageService.getCameraFacing().then(l=>{this.cameraFacing=l||"environment"}),fe({arrowBack:he,arrowForward:bt,chevronUp:Mt,chevronDown:Rt,keypad:Ot,grid:kt,scan:Dt,play:Et,star:Lt,trophy:At,checkmarkCircle:xt}),this.scrollService.scrollTop$.subscribe(l=>{this.showShadow=l>0})}ngOnInit(){return P(this,null,function*(){this.loadAPIKey(),yield this.loadProfile(),yield this.saveLastOpened(this.selected)})}ngAfterViewInit(){this.scrollService.register(this.content)}selectLetter(t){return P(this,null,function*(){this.selected=t,this.showKeyPad=!1,this.saveLastOpened(this.selected)})}get currentIndex(){let t=this.letters.indexOf(this.selected);return t<0?0:t}selectByOffset(t){let r=this.letters.length,o=(this.currentIndex+t+r)%r;this.selected=this.letters[o]}next(){return P(this,null,function*(){this.selectByOffset(1),this.showKeyPad=!1,this.saveLastOpened(this.selected)})}prev(){return P(this,null,function*(){this.selectByOffset(-1),this.showKeyPad=!1,this.saveLastOpened(this.selected)})}onShowScanner(t){return P(this,null,function*(){let r=yield this.modalCtrl.create({component:Qt,cssClass:"modal-fullscreen scanner",backdropDismiss:!1,canDismiss:!0,id:"scanner",componentProps:{targetLetter:t,currentFacing:this.cameraFacing,currentProfile:this.currentProfile}});yield r.present(),r.onDidDismiss().then(o=>{console.log(o);let{result:s,currentFacing:a}=o==null?void 0:o.data;s&&(s!=null&&s.toString().toLowerCase().includes("correct"))&&this.logCompleted(),a&&(this.cameraFacing=a)})})}onKey(t){t.key==="ArrowRight"?this.next():t.key==="ArrowLeft"&&this.prev()}loadProfile(){return P(this,null,function*(){var t,r,o,s,a,l,c,p,m;this.currentProfile=yield this.storageService.getSavedProfile(),(o=(r=(t=this.currentProfile)==null?void 0:t.progress)==null?void 0:r.alphabet)!=null&&o.lastOpened&&((l=(a=(s=this.currentProfile)==null?void 0:s.progress)==null?void 0:a.alphabet)==null?void 0:l.lastOpened)!==""?this.selected=(m=(p=(c=this.currentProfile)==null?void 0:c.progress)==null?void 0:p.alphabet)==null?void 0:m.lastOpened.toString().toUpperCase():this.selected="A"})}saveLastOpened(t){var r,o;(o=(r=this.currentProfile)==null?void 0:r.progress)!=null&&o.alphabet&&(this.currentProfile.progress.alphabet.lastOpened=t),this.authService.setCurrentLogin(this.currentProfile),this.storageService.saveProfile(this.currentProfile)}logCompleted(){let t=[...this.currentProfile.progress.alphabet.compeleted];t.some(r=>r.toLowerCase().includes(this.selected.toLowerCase()))||t.push(this.selected),this.currentProfile.progress.alphabet.compeleted=t,this.storageService.saveProfile(this.currentProfile)}loadAPIKey(){var t,r;(r=(t=this.apiKeyManagementService)==null?void 0:t.currentAPIKey)!=null&&r.apiKey||(this.apiKeySub=this.apiKeyManagementService.get().subscribe(o=>{o&&o.data&&(this.storageService.saveAPIKey(o.data),this.apiKeyManagementService.setCurrentAPIKey(o.data))}))}};n.\u0275fac=function(r){return new(r||n)(k(ue),k(pe),k(_t),k(de),k(me))},n.\u0275cmp=X({type:n,selectors:[["app-alphabet"]],viewQuery:function(r,o){if(r&1&&K(N,7),r&2){let s;V(s=G())&&(o.content=s.first)}},hostBindings:function(r,o){r&1&&x("keydown",function(a){return o.onKey(a)},!1,ct)},decls:36,vars:11,consts:[["moreFab",""],["letterButtons",""],[3,"translucent","ngClass"],["slot","start"],["default-href","/home"],["slot","end",1,"keypadbutton"],["fill","clear",3,"click"],["name","keypad"],[1,"page",3,"fullscreen"],[1,"wrapper"],[1,"preview-frame"],[2,"position","absolute"],[3,"src","alt",4,"ngIf"],[4,"ngTemplateOutlet"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","scan"],[1,"alphabet-controls"],[1,"slide-control"],["size","large","shape","round","fill","outline","aria-label","Previous letter",1,"next-prev",3,"click"],["slot","icon-only","name","arrow-back"],[1,"current"],["shape","round","fill","clear","size","small",3,"click"],["slot","icon-only","name","chevron-down"],["slot","icon-only","name","chevron-up"],["size","large","shape","round","fill","outline","aria-label","Next letter",1,"next-prev",3,"click"],["slot","icon-only","name","arrow-forward"],["color","success","name","checkmark-circle","slot","icon-only",1,"done"],[3,"src","alt"],["role","group","aria-label","ASL Alphabet",1,"keypad",3,"ngClass"],[4,"ngIf"],["size","small","shape","round","class","key",3,"active","click",4,"ngFor","ngForOf"],["size","small","shape","round",1,"key",3,"click"]],template:function(r,o){if(r&1){let s=I();C(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",3),_(3,"ion-back-button",4),u(),C(4,"ion-title"),O(5,"Alphabet"),u(),C(6,"ion-buttons",5)(7,"ion-button",6),x("click",function(){return R(s),M(o.showKeyPad=!o.showKeyPad)}),_(8,"ion-icon",7),u()()()(),C(9,"ion-content",8)(10,"div",9)(11,"div",10),T(12,Sn,2,0,"div",11)(13,Pn,1,2,"img",12),u(),T(14,_n,1,0,"ng-container",13),C(15,"ion-fab",14,0)(17,"ion-fab-button",15),x("click",function(){return R(s),M(o.onShowScanner(o.selected))}),_(18,"ion-icon",16),u()()()(),C(19,"ion-footer")(20,"ion-toolbar")(21,"div",17)(22,"div",18)(23,"ion-button",19),x("click",function(){R(s);let l=A(16);return o.prev(),M(l.activated=!1)}),_(24,"ion-icon",20),u(),C(25,"div",21)(26,"ion-button",22),x("click",function(){R(s);let l=A(16);return o.showKeyPad=!o.showKeyPad,M(l.activated=!1)}),T(27,bn,1,0,"ion-icon",23)(28,Tn,1,0,"ion-icon",24),u(),C(29,"h1"),O(30),u()(),C(31,"ion-button",25),x("click",function(){R(s);let l=A(16);return o.next(),M(l.activated=!1)}),_(32,"ion-icon",26),u()(),T(33,xn,1,0,"ng-container",13),u()()(),T(34,kn,2,4,"ng-template",null,1,ut)}if(r&2){let s=A(35);y("translucent",!0)("ngClass",j(9,yn,!o.showShadow)),h(9),y("fullscreen",!1),h(3),Me(o.isComplted?12:-1),h(),y("ngIf",o.imgSrc),h(),y("ngTemplateOutlet",s),h(13),Me(o.showKeyPad?27:28),h(3),D(o.selected),h(3),y("ngTemplateOutlet",s)}},dependencies:[te,w,gt,ee,Ct,N,ce,re,ne,le,ae,se,St,ie,oe,Pt],styles:["ion-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700}.page[_ngcontent-%COMP%]{--background: #ffffff;display:flex;flex-direction:column;gap:14px}.preview-frame[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:14px;background:#f2f2f6;border:1px solid #ececec;display:flex;overflow:hidden;height:100%;margin:0 20px;padding:10px;position:relative}.preview-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.key[_ngcontent-%COMP%]{--background: #fff;--border-radius: 10px;font-weight:600;font-size:1rem;letter-spacing:.4px;--padding-top: 1rem;--padding-bottom: 1rem;--padding-start: 0;--padding-end: 0;margin:0!important;--color: #333}@media screen and (max-width: 480px){.key[_ngcontent-%COMP%]{--padding-top: 1.3rem;--padding-bottom: 1.3rem}}.key.active[_ngcontent-%COMP%]{--background: var(--ion-color-primary, #0054e9);--color: var(--ion-color-primary-contrast, #fff)}.keypad[_ngcontent-%COMP%]{width:100%;max-width:520px;margin:10px auto;grid-template-columns:repeat(7,1fr);gap:4px;overflow:hidden;display:none;height:250px;transition:height .5s;padding:20px}.keypad[_ngcontent-%COMP%]:not(.show){animation:_ngcontent-%COMP%_hideDelay .5s forwards}.keypad.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_showDelay .5s forwards}.alphabet-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]{margin:10px auto;display:grid;gap:20px;grid-template-columns:repeat(3,1fr);align-items:end}@media screen and (max-width: 480px){.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]{margin:0 auto}}@media screen and (max-width: 480px){.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .next-prev[_ngcontent-%COMP%]{height:70px;width:70px}}.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:20px;width:20px;padding:0!important;display:none}@media screen and (max-width: 480px){.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block!important}}.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.8rem}.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;padding:10px 0}@media screen and (max-width: 480px){.alphabet-controls[_ngcontent-%COMP%]   .slide-control[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:20px 0}}@keyframes _ngcontent-%COMP%_hideDelay{0%{height:250px;padding:20px;margin:10px auto}to{height:0px;padding:0;margin:0}}@keyframes _ngcontent-%COMP%_showDelay{0%{height:0px;padding:0;margin:0}20%{height:250px;padding:20px;margin:10px auto}}@media screen and (max-width: 480px){ion-footer[_ngcontent-%COMP%]   .alphabet-controls[_ngcontent-%COMP%]   .keypad[_ngcontent-%COMP%]{display:grid!important}}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;box-sizing:border-box;padding-bottom:20px}.wrapper[_ngcontent-%COMP%]   .preview-frame[_ngcontent-%COMP%]{margin-left:20px}.wrapper[_ngcontent-%COMP%]   .keypad.show[_ngcontent-%COMP%]{width:70%;display:grid;height:fit-content!important;margin:0 20px 0 0!important;padding:5px;gap:3px}.wrapper[_ngcontent-%COMP%]   .keypad.show[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{height:20px;--padding-top: 0px;--padding-bottom: 0px}@media screen and (max-width: 480px){.wrapper[_ngcontent-%COMP%]   .keypad[_ngcontent-%COMP%]{display:none!important}}.keypadbutton[_ngcontent-%COMP%]{display:block}.keypadbutton[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem!important}@media screen and (max-width: 480px){.keypadbutton[_ngcontent-%COMP%]{display:none!important}}.done[_ngcontent-%COMP%]{width:40px;height:40px;background:#fff;border-radius:50%}"]});let e=n;return e})();export{tr as AlphabetPage};
