import{a as H,b as Y}from"./chunk-OO67IDCK.js";import{d as J}from"./chunk-SMHH257M.js";import"./chunk-FUHXKBJ3.js";import"./chunk-QUJFQN2Y.js";import"./chunk-64PZ3OSN.js";import"./chunk-JHV7MXM5.js";import"./chunk-7ISF44PN.js";import"./chunk-DHGKAU6G.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-WKYNZQQQ.js";import"./chunk-GGIMTWXW.js";import"./chunk-YPOD3FIG.js";import"./chunk-KFC3XH7K.js";import"./chunk-A4LS7W3H.js";import"./chunk-CKP3SGE2.js";import{a as F,b as E}from"./chunk-3NTGT44D.js";import{a as Q,b as u,e as $,g as m}from"./chunk-7YAWXMMP.js";import{Gb as T,H as n,Hb as G,J as P,Kb as V,La as x,Pa as d,Qa as B,Ra as U,Ta as R,Ua as z,Va as c,W as b,X as I,Xa as L,Y as A,Ya as M,Za as j,dc as k,ec as q,fc as D,hc as W,ob as O,s as p,t as w}from"./chunk-55BITWVR.js";import"./chunk-MTUXJE3Z.js";import"./chunk-RD3XSXCJ.js";import"./chunk-6NUEBUYE.js";import"./chunk-W5FUFK6T.js";import"./chunk-PLFY2CTQ.js";import"./chunk-7PW2J7O2.js";import"./chunk-QIBKRVRZ.js";import"./chunk-WWLKLYXQ.js";import"./chunk-ADUYDX2F.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-O4PCMGUI.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as o}from"./chunk-LRBG2F7K.js";var h=E("App",{web:()=>import("./chunk-6ZB7IN6N.js").then(t=>new t.AppWeb)});var K=(()=>{let r=class r{constructor(e,s,l,Z,_,tt,et,ot,rt){this.platform=e,this.storageService=s,this.statusBarService=l,this.router=Z,this.activatedRoute=_,this.modalCtrl=tt,this.loadingCtrl=et,this.authService=ot,this.actionSheetController=rt,this.backSub=this.platform.backButton.subscribeWithPriority(10,()=>o(this,null,function*(){let f=yield this.modalCtrl.getTop(),v=yield this.actionSheetController.getTop(),C=yield this.loadingCtrl.getTop();if(f){yield f.dismiss();return}if(v){yield v.dismiss();return}if(C){yield C.dismiss();return}console.log("Current route:",this.router.url);let i=this.router.url,S=[],it=[{text:"Minimize the app?",handler:()=>o(this,null,function*(){return h.minimizeApp()})},{text:"Close the app?",handler:()=>o(this,null,function*(){return h.exitApp()})},{text:"Back",cssClass:"close dismiss cancel",handler:()=>o(this,null,function*(){this.actionSheetController.dismiss()})}];if(i.includes("/login")||i.includes("/register")){this.router.navigateByUrl("/landing-page",{replaceUrl:!0});return}else if(i.includes("/profile")||i.includes("/alphabet")){this.router.navigateByUrl("/home",{replaceUrl:!0});return}else if(i.includes("/lessons")){/^\/lessons$/.test(i)?this.router.navigateByUrl("/home",{replaceUrl:!0}):this.router.navigateByUrl("/lessons",{replaceUrl:!0});return}else{if(i.includes("/send-verification")||i.includes("/reset-password")||i.includes("/otp"))return;i.includes("/home")&&S.push({text:"Logout",handler:()=>o(this,null,function*(){let y=yield this.actionSheetController.create({header:"Are you sure you want to logout?",buttons:[{text:"Yes, Logout",handler:()=>o(this,null,function*(){this.authService.logout(),this.router.navigateByUrl("/login",{replaceUrl:!0})})},{text:"Cancel",cssClass:"close dismiss cancel",handler:()=>o(this,null,function*(){y.dismiss()})}]});yield y.present()})})}yield(yield this.actionSheetController.create({buttons:[...S,...it]})).present()})),this.initializeStatusBar()}ionViewWillEnter(){this.initializeStatusBar()}ionViewWillLeave(){var e;(e=this.backSub)==null||e.unsubscribe(),this.backSub=void 0}initializeStatusBar(){this.statusBarService.show(!0),this.statusBarService.modifyStatusBar(H.Light,"#ffffff"),this.statusBarService.overLay(!1)}ngOnInit(){this.storageService.getSavedProfile().then(e=>{e?(console.log("AppComponent: profile loaded on init",e),e!=null&&e.progress||(e.progress={alphabet:{lastOpened:null,compeleted:[],status:"0%"},lessons:{lastOpened:"",compeleted:[],status:"0%"},quiz:{lastOpened:"",compeleted:[],status:"0%"}}),this.authService.setCurrentLogin(e),this.storageService.saveProfile(e)):console.log("AppComponent: no profile found on init")}),this.platform.ready().then(()=>o(this,null,function*(){F.getPlatform()!=="web"&&this.initializeStatusBar()}))}ngOnDestroy(){var e;(e=this.backSub)==null||e.unsubscribe()}};r.\u0275fac=function(s){return new(s||r)(n(O),n(u),n(Y),n(c),n(R),n(k),n(W),n(m),n(D))},r.\u0275cmp=P({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(s,l){s&1&&(b(0,"ion-app"),A(1,"ion-router-outlet"),I())},dependencies:[V,G],encapsulation:2});let t=r;return t})();function nt(){return o(this,null,function*(){let t=p(u),r=p(m),a=p(c),e=yield t.getSavedProfile();if(!!e&&typeof e.userId=="string"&&e.userId.trim().length>0)return!0;let l=yield t.isOnboardingCompleted();return l!==!0&&l!=="true"&&l!==1?a.parseUrl("/landing-page"):(r.logout(),a.parseUrl("/login"))})}function at(){return o(this,null,function*(){let t=p(u),r=p(c),a=yield t.getSavedProfile();return!!a&&typeof a.userId=="string"&&a.userId.trim().length>0?r.parseUrl("/home"):!0})}var g=()=>nt(),N=()=>at();var X=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",canMatch:[g],loadComponent:()=>import("./chunk-OOEV2XOT.js").then(t=>t.HomePage)},{path:"profile",canMatch:[g],loadComponent:()=>import("./chunk-CRQLZE4G.js").then(t=>t.ProfilePage)},{path:"landing-page",loadComponent:()=>import("./chunk-MMNE2UZC.js").then(t=>t.LandingPagePage)},{path:"login",canMatch:[N],loadComponent:()=>import("./chunk-U7FV4YUZ.js").then(t=>t.LoginPage)},{path:"register",loadComponent:()=>import("./chunk-BU443HYE.js").then(t=>t.RegisterPage)},{path:"otp",loadComponent:()=>import("./chunk-CHWTUHSD.js").then(t=>t.OtpPage)},{path:"send-verification",loadComponent:()=>import("./chunk-SXVGX7GN.js").then(t=>t.SendVerificationPage)},{path:"alphabet",loadComponent:()=>import("./chunk-V5AXNRXH.js").then(t=>t.AlphabetPage)},{path:"lessons",loadComponent:()=>import("./chunk-4ITQZEYI.js").then(t=>t.LessonsPage)},{path:"lessons/:category",loadComponent:()=>import("./chunk-BH4OWWEH.js").then(t=>t.CategoryPage)},{path:"category",loadComponent:()=>import("./chunk-BH4OWWEH.js").then(t=>t.CategoryPage)},{path:"text-to-sign",loadComponent:()=>import("./chunk-OW4U7TBM.js").then(t=>t.TextToSignPage)},{path:"reset-password",loadComponent:()=>import("./chunk-DWXU3W74.js").then(t=>t.ResetPasswordPage)},{path:"quiz",loadComponent:()=>import("./chunk-DKYIZX7N.js").then(t=>t.QuizPage)},{path:"quiz/quiz-game",loadComponent:()=>import("./chunk-GGD5M4WO.js").then(t=>t.QuizGamePage)},{path:"**",redirectTo:""}];x(K,{providers:[{provide:z,useClass:T},w(J.forRoot(),Q.forRoot({name:"__myappdb"})),d(B([$])),q(),M(X,j(L)),d(U())]});
